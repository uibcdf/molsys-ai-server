
# ADR-005: Distribución física de nodos (entrenamiento vs producción)

## Fecha
2025-12-04

## Estado
Aceptada

## Contexto
Existen dos nodos disponibles:
- Nodo A: con IP estática.
- Nodo B: sin IP estática.
Ambos con 3 GPUs GTX 1080 Ti.

Es necesario decidir cómo distribuir responsabilidades entre ambos nodos.

## Decisión
- Nodo sin IP fija → **entrenamiento y experimentación** (LoRA/QLoRA, pruebas de modelos).
- Nodo con IP fija → **inferencia / producción** (servir modelos y APIs públicos/estables).

## Opciones consideradas

### 1. Entrenar e inferir en el mismo nodo
**Pros:**
- Arquitectura más simple a nivel conceptual.

**Contras:**
- Riesgo de interferencias entre cargas de entrenamiento y servicio.
- Posibilidad de saturar GPUs de producción.
- Mayor dificultad para garantizar disponibilidad del servicio.

### 2. Separar nodos (elegida)
**Pros:**
- Limpieza y estabilidad en producción.
- Entrenamiento sin restricciones de tiempo ni impacto en usuarios.
- Flujo claro: entrenamiento → push a Hugging Face Hub → pull en producción.

**Contras:**
- Requiere mantener dos entornos sincronizados (dependencias, versiones de código).

## Justificación
Separar entrenamiento e inferencia es una práctica estándar que reduce riesgos y mejora la estabilidad del sistema en producción.

## Consecuencias
- Flujo de trabajo nítido:
  - Nodo B: entrenamiento y subida de modelos a HF.
  - Nodo A: descarga y servicio del modelo seleccionado.
- Escalable cuando haya más nodos o GPUs adicionales.

## Notas futuras
- Revisar topología cuando se disponga de hardware nuevo o se añadan más nodos.
