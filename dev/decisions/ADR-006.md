# üìÑ **ADR-006: Choice of the technical basis for the MolSys-AI CLI**

*(This is here for review; if you like it, it will be added to the repo and the ZIP will be regenerated.)*

---

## **ADR-006: Technical basis for the MolSys-AI CLI (colors, ergonomics and style)**

**Date:** 2025-12-04  
**Status:** Proposed (pending approval)

---

## **Context**

MolSys-AI will have an **interactive CLI**, where advanced users (researchers, developers) will run:

* queries to the agent,
* tools from the MolSysMT/MolSysViewer/TopoMT ecosystem,
* automated workflows,
* actions such as loading systems, running scripts, etc.

The CLI must be:

* robust,
* pleasant to use,
* clear in its output,
* easy to extend,
* easily installable via `pip`,
* and compatible with Linux/macOS (with minimum support for Windows).

It was also discussed that the user wants:

* colors,
* pleasant prompts,
* an experience similar to a **specialized shell for agents**,
* without heavy dependencies.

---

## **Decision**

The CLI will be implemented using:

### ‚úî **Standard Python (`argparse`) for basic commands**

* Initially, the CLI does not need complexity.
* It is stable, portable, and part of the standard library.

### ‚úî **`rich` + `rich.prompt` for:**

* Colors,
* boxes and panels,
* elegant prompts,
* colored traces,
* states (info/warn/error).

### ‚úî **Future-oriented structure:**

* A *command* mode such as:

  ```
  molsys-ai run ...
  molsys-ai chat
  molsys-ai tools list
  ```
* And a *interactive shell* mode later on if desired.

---

## **Options considered**

### **1. argparse + rich** (chosen)

**Pros**

* No heavy dependencies.
* Beautiful, professional, and very clear output.
* `rich.prompt` provides minimal, interactive prompts.
* Easy to test.
* Stays very ‚ÄúPythonic‚Äù.

**Cons**

* Autocompletion and advanced subcommands require some manual work.

---

### **2. typer + rich**

**Pros**

* Very modern syntax.
* Automatic self-documentation.
* Colors integrated via rich.

**Cons**

* Depends heavily on click.
* Less fine-grained control in the initial phase.
* Hides details we may want to control explicitly.

---

### **3. click**

**Pros**

* Extremely popular.
* Excellent handling of subcommands.

**Cons**

* Verbose for scientific projects.
* Harder to extend into a ‚Äúshell mode‚Äù.

---

### **4. prompt_toolkit**

**Pros**

* Ideal for a true interactive shell.
* Supports:

  * real autocompletion,
  * multi-line input,
  * syntax highlighting,
  * Vim/Emacs-style keybindings.

**Cons**

* Much more complex.
* Overkill for the MVP.
* Better suited for a v0.4 or v0.5.

---

## **Justification**

* `argparse` + `rich` is the cleanest path for the MVP.
* It produces a modern CLI without unnecessary complexity.
* It allows migration to something more advanced once the agent is more mature.
* The final CLI user (advanced researcher) will appreciate a clear, professional interface without gimmicks.

---

## **Consequences**

**Positive**

* Simple, clean, and maintainable CLI.
* Excellent visual presentation from day one.
* Easy integration with a future interactive mode.

**Negative**

* No native autocompletion (but it can be added later).
* Some users may request a more advanced shell mode.

---

## **Future notes / advanced version**

In future versions (v0.4+):

* Add an advanced shell via **prompt_toolkit**:

  * tool autocompletion,
  * persistent history,
  * support for multi-step ‚Äúplans‚Äù.

* Export the CLI as a package via `pip install molsys-ai-cli`.

* Add integration with a remote server for multiple users.

---
