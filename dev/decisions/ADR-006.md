# üìÑ **ADR-006: Elecci√≥n de la base t√©cnica para la CLI de MolSys-AI**

*(Aqu√≠ est√° para revisi√≥n; si te gusta, la a√±ado al repo y regenero el ZIP.)*

---

## **ADR-006: Base t√©cnica de la CLI de MolSys-AI (colores, ergonom√≠a y estilo)**

**Fecha:** 2025-12-04
**Estado:** Propuesta (pendiente de aprobaci√≥n)

---

## **Contexto**

MolSys-AI tendr√° una **CLI interactiva**, donde usuarios avanzados (investigadores, desarrolladores) ejecutar√°n:

* consultas al agente,
* herramientas del ecosistema MolSysMT/MolSysViewer/TopoMT,
* workflows automatizados,
* acciones como cargar sistemas, ejecutar scripts, etc.

La CLI debe ser:

* robusta,
* agradable de usar,
* clara en su output,
* f√°cil de extender,
* f√°cilmente instalable v√≠a `pip`,
* y compatible con Linux/macOS (m√≠nimo soporte para Windows).

Tambi√©n se discuti√≥ que el usuario desea:

* colores,
* prompts agradables,
* una experiencia parecida a una **shell especializada para agentes**,
* sin dependencias pesadas.

---

## **Decisi√≥n**

La CLI se implementar√° usando:

### ‚úî **Python est√°ndar (`argparse`) para comandos b√°sicos**

* Inicialmente, el CLI no necesita complicaci√≥n.
* Es estable, portable y viene en la stdlib.

### ‚úî **`rich` + `rich.prompt` para:**

* Colores,
* cajas y paneles,
* prompts elegantes,
* trazas coloreadas,
* estados (info/warn/error).

### ‚úî **Estructura orientada a futuro:**

* Un modo *command* tipo:

  ```
  molsys-ai run ...
  molsys-ai chat
  molsys-ai tools list
  ```
* Y un modo *shell interactivo* m√°s adelante si se desea.

---

## **Opciones consideradas**

### **1. argparse + rich** (elegida)

**Pros**

* Sin dependencias pesadas.
* Output precioso, profesional y muy claro.
* `rich.prompt` da prompts interactivos minimalistas.
* F√°cil de testear.
* Se mantiene muy ‚ÄúPythonic‚Äù.

**Contras**

* Autocompletado y subcomandos avanzados requieren algo de trabajo manual.

---

### **2. typer + rich**

**Pros**

* Sintaxis muy moderna.
* Autodocumentaci√≥n autom√°tica.
* Colores integrados v√≠a rich.

**Contras**

* Depende fuertemente de click.
* Menos control fino en la fase inicial.
* Oculta detalles que quiz√° queramos controlar expl√≠citamente.

---

### **3. click**

**Pros**

* Extremadamente popular.
* Excelente manejo de subcomandos.

**Contras**

* Verboso para proyectos cient√≠ficos.
* Cuesta extenderlo a un ‚Äúmodo shell‚Äù.

---

### **4. prompt_toolkit**

**Pros**

* Ideal para una verdadera shell interactiva.
* Soporta:

  * autocompletado real,
  * multi-l√≠nea,
  * syntax highlighting,
  * keybindings estilo Vim/Emacs.

**Contras**

* Mucho m√°s complejo.
* Overkill para el MVP.
* Mejor para una v0.4 o v0.5.

---

## **Justificaci√≥n**

* `argparse` + `rich` es la ruta m√°s limpia para el MVP.
* Produce un CLI moderno sin complejidad innecesaria.
* Permite migrar a algo m√°s avanzado cuando el agente est√© m√°s maduro.
* El usuario final del CLI (investigador avanzado) apreciar√° una interfaz clara y profesional sin artificios.

---

## **Consecuencias**

**Positivas**

* CLI simple, limpia y mantenible.
* Excelente presentaci√≥n visual desde el primer d√≠a.
* Permite integraci√≥n f√°cil con un modo interactivo futuro.

**Negativas**

* Falta autocompletado nativo (pero puede a√±adirse luego).
* Algunos usuarios pueden pedir un modo shell m√°s avanzado.

---

## **Notas futuras / versi√≥n avanzada**

En futuras versiones (v0.4+):

* A√±adir shell avanzada v√≠a **prompt_toolkit**:

  * autocompletado de herramientas,
  * historial persistente,
  * soporte para ‚Äúplanes‚Äù multi-pasos.

* Exportar el CLI como paquete `pip install molsys-ai-cli`.

* A√±adir integraci√≥n con un servidor remoto para m√∫ltiples usuarios.

---
